{% extends "dashboard.html" %}

{% block content %}
<div class="container-fluid">
    <div class="row g-4 mb-5">
        <div class="col-12 animate__animated animate__fadeIn">
            <div class="p-4 rounded-4 shadow-sm border-0" style="background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); color: white;">
                <h2 class="fw-800 mb-1">–ö—É—Ç–º–∞–Ω –∫“Ø–Ω, {{ teacher.fio }}! üëã</h2>
                <p class="opacity-75 mb-0">–ë“Ø–≥“Ø–Ω —Å–∏–∑–¥–µ –∞–∫—Ç–∏–≤–¥“Ø“Ø {{ groups.count }} –≥—Ä—É–ø–ø–∞ –±–∞—Ä.</p>
            </div>
        </div>

        <div class="col-xl-4 col-md-6">
            <div class="stat-card-premium">
                <div class="stat-icon bg-primary bg-opacity-10 text-primary"><i class="fas fa-users"></i></div>
                <h6 class="text-muted small fw-bold">–ú–ï–ù–ò–ù –û–ö–£–£–ß–£–õ–ê–†–´–ú</h6>
                <h2 class="fw-800 m-0">{{ total_students }}</h2>
                <div class="mt-3 text-success small fw-bold">–ê–∫—Ç–∏–≤–¥“Ø“Ø –æ–∫—É—É—á—É–ª–∞—Ä</div>
            </div>
        </div>
        <div class="col-xl-4 col-md-6">
            <div class="stat-card-premium">
                <div class="stat-icon bg-success bg-opacity-10 text-success"><i class="fas fa-star"></i></div>
                <h6 class="text-muted small fw-bold">–ñ–ê–õ–ü–´ –ö–û–Æ–õ–ì–ê–ù –£–ü–ê–ô–õ–ê–†</h6>
                <h2 class="fw-800 m-0">{{ total_points }}</h2>
                <div class="mt-3 text-muted small fw-bold">–ê–∫—ã—Ä–∫—ã 30 –∫“Ø–Ω–¥”©</div>
            </div>
        </div>
        <div class="col-xl-4 col-md-6">
            <div class="stat-card-premium">
                <div class="stat-icon bg-warning bg-opacity-10 text-warning"><i class="fas fa-layer-group"></i></div>
                <h6 class="text-muted small fw-bold">–ì–†–£–ü–ü–ê–õ–ê–†</h6>
                <h2 class="fw-800 m-0">{{ groups.count }}</h2>
                <div class="mt-3 text-primary small fw-bold">–£—á—É—Ä–¥–∞–≥—ã —Å–µ–º–µ—Å—Ç—Ä</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="premium-table-box animate__animated animate__fadeInUp">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="fw-800 m-0">–ú–µ–Ω–∏–Ω –ì—Ä—É–ø–ø–∞–ª–∞—Ä—ã–º</h5>
                    <a href="{% url 'teacher_groups' %}" class="btn btn-outline-primary btn-sm rounded-pill px-3">–ë–∞–∞—Ä—ã–Ω –∫”©—Ä“Ø“Ø</a>
                </div>
                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead>
                            <tr>
                                <th>–ì–†–£–ü–ü–ê–ù–´–ù –ê–¢–´</th>
                                <th>–ö–£–†–° / –ë–ê–ì–´–¢</th>
                                <th>–û–ö–£–£–ß–£–õ–ê–† –°–ê–ù–´</th>
                                <th>–ñ–£–†–ù–ê–õ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for group in groups %}
                            <tr>
                                <td class="fw-bold">{{ group.name }}</td>
                                <td>{{ group.subject.name|default:"–ë–∞–≥—ã—Ç—ã –∂–æ–∫" }}</td>
                                <td><span class="badge bg-light text-dark rounded-pill px-3">{{ group.liststudent_set.count }} –æ–∫—É—É—á—É</span></td>
                                <td>
                                    <a href="{% url 'group_journal' group.id %}" class="btn btn-primary btn-sm rounded-pill">
                                        <i class="fas fa-pen-nib me-1"></i> –ñ—É—Ä–Ω–∞–ª–¥—ã –∞—á—É—É
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center py-4 text-muted">–ê–∑—ã—Ä—ã–Ω—á–∞ –≥—Ä—É–ø–ø–∞–ª–∞—Ä—ã“£—ã–∑ –∂–æ–∫.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}